<!-- index.html -->
<!DOCTYPE html>
<html>
    <head>
        <title>Azure Communication Services - Calling Web SDK</title>
        <link rel="stylesheet" type="text/css" href="styles.css"/>
    </head>
    <body>
        <h4>Azure Communication Services - Calling Web SDK</h4>
        <input id="user-access-token"
            type="text"
            placeholder="User access token"
            style="margin-bottom:1em; width: 500px;"/>
        <button id="initialize-call-agent" type="button">Initialize Call Agent</button>
        <br>
        <br>
        <input id="callee-acs-user-id"
            type="text"
            placeholder="Enter callee's Azure Communication Services user identity in format: '8:acs:resourceId_userId'"
            style="margin-bottom:1em; width: 500px; display: block;"/>
        <button id="start-call-button" type="button" disabled="true">Start Call</button>
        <button id="hangup-call-button" type="button" disabled="true">Hang up Call</button>
        <button id="accept-call-button" type="button" disabled="true">Accept Call</button>
        <button id="start-video-button" type="button" disabled="true">Start Video</button>
        <button id="stop-video-button" type="button" disabled="true">Stop Video</button>
        <br>
        <!-- Step 2.3 -->
        <div style="margin: 10px 0; padding: 10px; border: 2px solid #2196F3; border-radius: 5px;">
            <h4>🎤 Speech Recognition - Step 2.3: Integrazione con Chiamata</h4>
            
            <!-- Indicatore stato chiamata -->
            <div id="call-status-indicator" style="
                padding: 8px; 
                margin-bottom: 10px; 
                background: #f5f5f5; 
                border: 1px solid #ddd; 
                border-radius: 3px; 
                text-align: center;
            ">
                📞 Nessuna chiamata attiva
            </div>
            
            <!-- Controlli manuali -->
            <div style="margin-bottom: 10px;">
                <button id="start-transcription-button" style="background: #4CAF50; color: white; padding: 8px 16px; margin-right: 10px;">
                    ▶️ Avvia Trascrizione
                </button>
                <button id="stop-transcription-button" style="background: #f44336; color: white; padding: 8px 16px;" disabled>
                    ⏹️ Ferma Trascrizione
                </button>
            </div>
            
            <!-- Area trascrizione -->
            <div id="transcription-display" style="border: 1px solid #ddd; border-radius: 5px; padding: 10px; background: #f9f9f9;">
                <h5 style="margin: 0 0 10px 0; color: #333;">📝 Trascrizione in tempo reale:</h5>
                <div id="transcription-text" style="
                    min-height: 100px; 
                    max-height: 200px; 
                    overflow-y: auto; 
                    background: white; 
                    padding: 10px; 
                    border: 1px solid #ccc; 
                    border-radius: 3px; 
                    font-family: Arial, sans-serif; 
                    line-height: 1.4;
                    white-space: pre-wrap;
                ">
                    📞 Avvia una chiamata, oppure clicca "Avvia Trascrizione" manualmente...
                </div>
            </div>
        </div>

        <!-- Step 3.1 -->
        <div style="margin: 10px 0; padding: 10px; border: 2px solid #FF9800; border-radius: 5px;">
            <h4>🔊 Text-to-Speech - Step 3.1</h4>
            
            <!-- Test sintesi -->
            <div style="margin-bottom: 15px;">
                <h5 style="margin: 0 0 10px 0;">🧪 Test Sintesi</h5>
                <input type="text" id="test-text-input" 
                    placeholder="Inserisci del testo da sintetizzare..." 
                    value="Ciao, questo è un test della sintesi vocale italiana."
                    style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 3px;">
                
                <button id="test-synthesis-button" 
                        style="background: #FF9800; color: white; padding: 8px 16px; border: none; border-radius: 3px; cursor: pointer;">
                    🔊 Testa Sintesi
                </button>
            </div>
            
            <!-- Risultato test -->
            <div id="tts-test-result" style="
                min-height: 60px; 
                padding: 10px; 
                background: #f5f5f5; 
                border: 1px solid #ddd; 
                border-radius: 3px; 
                font-family: monospace;
                margin-bottom: 10px;
            ">
                Clicca "Testa Sintesi" per provare la voce selezionata...
            </div>
        </div>

        <br>
        <div id="connectedLabel" style="color: #13bb13;" hidden>Call is connected!</div>
        <br>
        <div id="remoteVideosGallery" style="width: 40%;" hidden>Remote participants' video streams:</div>
        <br>
        <div id="localVideoContainer" style="width: 30%;" hidden>Local video stream:</div>
        <!-- points to the bundle generated from client.js -->
        <script src="./main.js"></script>
    </body>
</html>